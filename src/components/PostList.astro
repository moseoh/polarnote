---
import PostListItem from './PostListItem.astro';
import type { CollectionEntry } from 'astro:content';

export interface Props {
  posts: CollectionEntry<'posts'>[];
  categories: string[];
  currentCategory: string;
}

const { posts, categories, currentCategory } = Astro.props;
---

<div class="w-full">
  <!-- Category Tabs -->
  <div class="mb-8 border-b border-gray-200">
    <nav class="-mb-px flex space-x-8" aria-label="Tabs">
      {
        categories.map((category) => {
          const isActive = category.toLowerCase() === currentCategory.toLowerCase();
          // 새로운 명시적 라우팅 구조에 맞춰 링크 생성
          const categoryParam = category === '전체' ? '@' : category.toLowerCase();
          const href = `/${categoryParam}/@/1`;
          return (
            <a
              href={href}
              class:list={[
                'whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm',
                isActive
                  ? 'border-gray-900 text-gray-900'
                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',
              ]}
            >
              {category}
            </a>
          );
        })
      }
    </nav>
  </div>

  <!-- Posts List -->
  <div class="space-y-12">
    {posts.map((post) => <PostListItem post={post} />)}
  </div>
</div> 