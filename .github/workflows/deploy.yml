name: Deploy to Cloudflare

on:
  schedule:
    # Run daily at midnight KST (15:00 UTC = 00:00 KST+9)
    - cron: '0 15 * * *'
  
  # Manual trigger option (uncomment to enable)
  # workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: Check if deploy URL is configured
        run: |
          if [ -z "${{ secrets.CLOUDFLARE_DEPLOY_HOOKS_URL }}" ]; then
            echo "‚ùå CLOUDFLARE_DEPLOY_HOOKS_URL secret is not configured"
            exit 1
          fi
          echo "‚úÖ Deploy URL is configured"
        
      - name: Trigger Cloudflare Deploy
        run: |
          curl -d "" "${{ secrets.CLOUDFLARE_DEPLOY_HOOKS_URL }}"
        
      - name: Check deployment status
        run: |
          echo "‚úÖ Cloudflare deploy hook has been triggered"
          echo "üìÖ Deploy time: $(date)"